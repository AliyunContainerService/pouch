dist: trusty
sudo: required

language: go
go:
  - 1.10.4

go_import_path: github.com/alibaba/pouch

before_install:
  |
    echo $TRAVIS_COMMIT_RANGE
    git diff --name-only $TRAVIS_COMMIT_RANGE | grep -qvE '(\.md$)' || {
      echo "travis does not run for document-only changed"
      exit
    }

notifications:
  webhooks:
    urls:
      - http://47.96.190.121:6789/ci_notifications
    on_failure: always
    on_error: always

jobs:
  include:
    - script: echo "111"
    - script: echo "222"
    - stage: deploy
      script: echo "333"
    - script: echo "444"
#jobs:
#  include:
#    - stage: "Pouch Test"
#      - script: ./travis_ci.sh unittest
#      - script: ./travis_ci.sh integrationtest
#      - script: ./travis_ci.sh criv1alpha1test
#      - script: ./travis_ci.sh criv1alpha2test
#      - script: ./travis_ci.sh nodee2etest

after_success:
  - bash <(curl -s https://codecov.io/bash) -cF ${TEST_SUITE} -y .codecov.yml
